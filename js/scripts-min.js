var completeIcon='<i class="material-icons">check</i>',removeIcon='<i class="material-icons">delete</i>',toDoToggle=document.getElementById("todo_toggle"),doneToggle=document.getElementById("done_toggle"),dueDate=document.getElementById("dueDate"),data=localStorage.getItem("todoList")?JSON.parse(localStorage.getItem("todoList")):{todo:[{value:"Get started by creating your first to-do",dateValue:"04/11/2020"}],done:[]};function renderTodoList(){if(data.todo.length||data.done.length){for(var e=0;e<data.todo.length;e++){addItemToDOM(data.todo[e].value,data.todo[e].dateValue)}for(var t=0;t<data.done.length;t++){addItemToDOM(data.done[t].value,data.done[t].dateValue,!0)}}}function formatDate(e){var t=new Date(e);return(new Intl.DateTimeFormat).format(t)}function addItem(e,t){addItemToDOM(e,t),document.getElementById("item").value="",document.getElementById("dueDate").value="",data.todo.push({value:e,dateValue:t}),dataObjectUpdated()}function addItemToDOM(e,t,d){var a=d?document.getElementById("completed_list_ul"):document.getElementById("todo_list_ul"),o=document.createElement("li"),n=document.createElement("button");n.classList.add("complete"),n.innerHTML=completeIcon,n.addEventListener("click",completeItem);var l=document.createElement("div");l.classList.add("itemDate"),l.innerHTML=t;var i=document.createElement("button");i.classList.add("remove"),i.innerHTML=removeIcon,i.addEventListener("click",removeItem),o.appendChild(n),o.insertAdjacentHTML("beforeend",e),o.appendChild(l),o.appendChild(i),a.insertBefore(o,a.childNodes[0])}function dataObjectUpdated(){localStorage.setItem("todoList",JSON.stringify(data))}function removeItem(){var e=this.parentNode,t=e.parentNode,d=t.id,a=e.firstChild.nextSibling.data;"todo_list_ul"===d?data.todo.splice(data.todo.indexOf(a),1):data.done.splice(data.done.indexOf(a),1),dataObjectUpdated(),t.removeChild(e)}function completeItem(){var e=this.parentNode,t=e.parentNode,d=t.id,a=e.firstChild.nextSibling.data,o=e.firstChild.nextSibling.nextSibling.innerHTML;"todo_list_ul"===d?(data.todo.splice(data.todo.indexOf(a),1),data.done.push({value:a,dateValue:o})):(data.done.splice(data.done.indexOf(a),1),data.todo.push({value:a,dateValue:o})),dataObjectUpdated();var n="todo_list_ul"===d?document.getElementById("completed_list_ul"):document.getElementById("todo_list_ul");t.removeChild(e),n.insertBefore(e,n.childNodes[0])}function toggleSection(){var e=document.getElementById("todo_section"),t=document.getElementById("done_section"),d=document.getElementById("header");toDoToggle.classList.contains("active")?(d.classList.add("done"),e.classList.remove("visible"),t.classList.add("visible"),toDoToggle.classList.remove("active"),doneToggle.classList.add("active")):(d.classList.remove("done"),t.classList.remove("visible"),e.classList.add("visible"),doneToggle.classList.remove("active"),toDoToggle.classList.add("active"))}renderTodoList(),document.getElementById("add").addEventListener("click",(function(){var e=document.getElementById("item").value,t=formatDate(document.getElementById("dueDate").value);e&&t&&addItem(e,t)})),document.getElementById("item").addEventListener("keydown",(function(e){if("Enter"===e.code){var t=this.value,d=formatDate(document.getElementById("dueDate").value);t&&d&&addItem(t,d)}})),document.getElementById("dueDate").addEventListener("keydown",(function(e){if("Enter"===e.code){var t=document.getElementById("item").value,d=formatDate(this.value);t&&d&&(addItem(t,d),document.getElementById("item").focus())}})),dueDate.addEventListener("focus",(function(){0==dueDate.value.length&&dueDate.classList.add("full")})),dueDate.addEventListener("blur",(function(){0==dueDate.value.length&&dueDate.classList.remove("full")})),toDoToggle.addEventListener("click",(function(){toggleSection()})),doneToggle.addEventListener("click",(function(){toggleSection()}));